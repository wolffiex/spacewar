exports.deepCopy = function(o) {
  return JSON.parse(JSON.stringify(o));
}

exports.notEmpty = function(o) {
  return o != null;
}

function Msg(key, value) {
  return {key: key, value: value};
}

Msg.filter = function(key){
  return function(msg) {
    return msg.key == key;
  }
};

Msg.value = function(msg) {
  return msg.value;
}

Msg.recv = function(stream, keyFilter) {
  var recv = function(key) {
    return stream.filter(Msg.filter(key)).map(Msg.value).share();
  }

  return keyFilter == null ? recv : recv(keyFilter);
}

exports.Msg = Msg;
