digraph G {
  compound=true;

  subgraph clusterGame {
    start;
    gameInfo->gameState;
    input->gameState;
    gameState->renderState;
    renderState->end;
    
    requestAnimationFrame->renderTimeout;
    requestAnimationFrame->render;
    renderTimeout->renderState;
    renderState->render;
    label = "Game";

    renderTimeout [label="timeout", shape=invhouse];
    requestAnimationFrame [shape=invhouse];
    render [shape=hexagon];
    gameState [label="game state"];
    renderState [label="render state"];

    subgraph clusterSocketA {
      ping->go [style="invis"];
      go->inputA;
      inputA [label="input"];
      label = "Socket A";
    }

    subgraph clusterSocketB {
      pong->go_b [style="invis"];
      go_b->inputB;
      go_b [label="go"];
      inputB [label="input"];
      label = "Socket B";
    }


  }

  inputA->inputB;
  inputB->inputA;
  inputA->input;
  inputB->input;

  start->ping [lhead=clusterSocketA];
  start->pong [lhead=clusterSocketB];

  ping->pong [weight=0];
  pong->go [weight=0];
  go->go_b [weight=0];

  go->gameInfo;
  go_b->gameInfo;

  sockets -> start [label="buffer 2"];
  end -> log [label="mergeAll"];
  //a -> b [label="hello", style=dashed];
  //a -> c [label="world"];
  //c -> d; b -> c; d -> a;
  //b [shape=Mdiamond, label="this is b"];
  //c [shape=polygon, sides=5, peripheries=3];
  //d [style=bold];
}

